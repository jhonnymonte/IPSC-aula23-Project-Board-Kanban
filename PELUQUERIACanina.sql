CREATE DATABASE PELUQUERIA_CANINA;
USE PELUQUERIA_CANINA;

CREATE TABLE DUENO( 
DNI INT NOT NULL,
NOMBRE VARCHAR(25) NOT NULL,
APELLIDO VARCHAR(25) NOT NULL,
TELEFONO INT DEFAULT NULL,
DIRECCION VARCHAR(50) DEFAULT NULL,
PRIMARY KEY(DNI)
);

CREATE TABLE PERRO(
ID_PERRO INT NOT NULL auto_increment PRIMARY KEY,
NOMBRE VARCHAR(25) DEFAULT NULL,
FECHA_NAC date,
SEXO VARCHAR(30) default NULL,
DNI_DUENO INT NOT NULL,
FOREIGN KEY(DNI_DUENO) REFERENCES DUENO(DNI),
INDEX IDX_NOMPERRO(NOMBRE)
);

CREATE TABLE HISTORIAL(
ID_HISTORIAL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
FECHA date,
PERRO VARCHAR(25) DEFAULT NULL,
DESCRIPCION VARCHAR(500) DEFAULT NULL,
MONTO INT DEFAULT NULL,
FOREIGN KEY (PERRO) REFERENCES PERRO(NOMBRE)
);


INSERT INTO DUENO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION)
VALUES
('36589987', 'JAVIER', 'GONZALES', '1158447889', 'CANGALLO 25, CABA'),
('25655584', 'MABEL', 'LUCCI', '1156447885', 'BELGRANO 789'),
('45698215', 'LORENZO', 'BANG', '1144778459', 'LUCERO 458'),
('35987456', 'LAURA', 'LOTO', '1146557821', 'USPALLATA 758');

INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUENO)
VALUES
('LULU', '2020-05-12', 'HEMBRA', '36589987'),
('CUCHO', '2018-06-23', 'MACHO', '25655584'),
('VILO', '2015-10-23', 'MACHO', '45698215'),
('MUNI', '2019-04-17', 'HEMBRA', '35987456');

INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO)
VALUES
('2020-10-06', 'LULU', 'PITBULL, PELAJE COLOR CARAMELO, BAÑO', 5000),
('2021-12-12', 'CUCHO', 'CANICHE, PELAJE COLOR BLANCO, BAÑO Y CORTE DE PELO ', 6000),
('2022-06-16', 'VILO', 'MESTIZO, PELAJE CORTO COLOR NEGRO, BAÑO, CORTE DE PELO Y UÑAS', 8000),
('2020-02-26', 'MUNI', 'DOGO, PELAJE CORTO COLOR BLANCO, BAÑO Y CORTE DE UÑAS', 7000);


-- Primero muestro cual es el registro del perro que no se atiende hace mucho tiempo.
-- De ese registro saco el ID para luego borrarlo.
-- Vuelvo a mostrar la tabla para ver si se borro. 
SELECT ID_HISTORIAL, MIN(FECHA), PERRO, DESCRIPCION, MONTO FROM HISTORIAL;
DELETE FROM HISTORIAL
WHERE ID_HISTORIAL = 1;

SELECT * FROM HISTORIAL;





